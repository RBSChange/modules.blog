<?xml version="1.0" encoding="UTF-8"?>
<panel>
	<section labeli18n="modules.blog.document.post.Contents">
		<field name="label" />
		<field name="postDate" />
		<field name="contents" />
		<field name="startpublicationdate" />
		<field name="endpublicationdate" />
	</section>
	<section labeli18n="modules.blog.document.post.CategoriesAndKeywords" class="toggle">
		<field name="category" />
		<field name="keywordsText" />
	</section>
	<section labeli18n="modules.blog.document.post.Summary" class="toggle" hidden="true">
		<field name="summary" />
		<field name="showSummaryOnDetail" />
	</section>
	<section labeli18n="modules.blog.document.post.CommentsAndPings" class="toggle" hidden="true">
		<field name="trackbacks" />
		<field name="allowComments" />
		<field name="allowPingbacks" />
		<field name="allowTrackbacks" />
	</section>
		<xul>
		<javascript>
			<field name="mPreviewPostButton">null</field>

			<constructor><![CDATA[
				this.mPreviewPostButton = this.addActionButton('&modules.blog.bo.actions.PreviewPost;', wToolkit.getIcon('preview', 'small'));
				var me = this;
				this.mPreviewPostButton.addEventListener('command', function(event) {me.onPreviewPost();}, true);			
				this.extendMethod("updateCommandsUI", this.updatePreviewPostUI);
			]]></constructor>

			<method name="updatePreviewPostUI">
				<parameter name="event" />
				<body><![CDATA[
					this.mPreviewPostButton.disabled = this.modified;
				]]></body>
			</method>

			<method name="onPreviewPost">
				<parameter name="event" />
				<body><![CDATA[
					this.documentEditor.module.previewPostFromDocument(this.mDocumentId, this.mLang);
				]]></body>
			</method>

		</javascript>
	</xul>
</panel>